import{a as oe}from"./chunk-NA5M3VLP.js";import{k as ee}from"./chunk-NDDQKOBX.js";import{$ as re,I as H,J as Q,V as te,Y as ie,Z as ne,_ as ae,b as j,f as U,i as q,k as G,r as V,s as z}from"./chunk-3CUYWVWG.js";import{a as Y,b as Z}from"./chunk-3H76ELPW.js";import{Ad as X,C,Cb as D,Db as g,Eb as E,Jb as k,Ka as S,Kb as R,M as b,Ob as B,Pa as s,Ua as h,Va as I,W as u,Wa as y,Xa as F,Ya as t,Z as T,Za as i,_a as m,ac as O,cc as P,h as M,hb as f,k as L,rc as N,s as p,sc as $,tb as r,ub as _,ud as J,vb as v,vd as W,wa as w,xa as a,xd as K,y as x}from"./chunk-6NNPIAAU.js";var se=n=>["/item",n],le=()=>[""],ce=()=>["/prosopography"],de=()=>["/harmonia_universalis"],me=()=>["./advanced_search"];function pe(n,c){if(n&1&&(t(0,"span"),r(1),i()),n&2){let e=f().$implicit;a(),v(", ",e.description,"")}}function ue(n,c){if(n&1&&(t(0,"div")(1,"span",11),r(2),i(),t(3,"mat-icon-button",12)(4,"mat-icon",13),r(5,"open_in_new"),i()(),r(6,"\xA0\xA0\xA0 "),S(7,pe,2,1,"span"),m(8,"hr"),i()),n&2){let e=c.$implicit;a(2),v("",e.label,"\xA0"),a(),s("routerLink",E(4,se,e.id)),a(),s("inline",!0),a(3),h(e.description?7:-1)}}function he(n,c){if(n&1&&(t(0,"div",9)(1,"div",10),y(2,ue,9,6,"div",null,I),i()()),n&2){let e=f();a(2),F(e.items)}}function fe(n,c){if(n&1&&(t(0,"span",21),r(1),t(2,"mat-icon-button",12)(3,"mat-icon",22),r(4,"open_in_new"),i()(),r(5,"\xA0\xA0\xA0\xA0\xA0 "),i()),n&2){let e=f().$implicit;a(),v(" ",e.label,"\xA0 "),a(),s("routerLink",E(3,se,e.value.id)),a(),s("inline",!0)}}function ve(n,c){if(n&1&&(t(0,"div",20),S(1,fe,6,5,"span",21),m(2,"br"),i()),n&2){let e=c.$implicit;a(),h(e?1:-1)}}function ge(n,c){if(n&1&&(t(0,"div")(1,"div",8)(2,"a",14),r(3,"Accueil"),i(),t(4,"span"),r(5,"\xA0\xA0|\xA0\xA0"),i(),t(6,"a",14),r(7,"Prosopographie"),i(),t(8,"span"),r(9,"\xA0\xA0|\xA0\xA0"),i(),t(10,"a",14),r(11,"Bibliographie"),i(),t(12,"span"),r(13,"\xA0\xA0|\xA0\xA0"),i(),t(14,"a",14),r(15),i(),t(16,"span"),r(17,"\xA0\xA0|\xA0\xA0"),i(),t(18,"a",15),r(19," Sparql query "),i(),t(20,"span"),r(21,"\xA0\xA0|\xA0\xA0"),i()(),t(22,"div",16)(23,"mat-card",17)(24,"div",18),r(25),i(),t(26,"div",19),m(27,"hr"),t(28,"mat-card-content")(29,"div"),y(30,ve,3,1,"div",20,I),i()()()()()()),n&2){let e=f();a(2),s("routerLink",g(6,le)),a(4),s("routerLink",g(7,ce)),a(4),s("routerLink",g(8,de)),a(4),s("routerLink",g(9,me)),a(),_(e.advanced_search),a(10),_(e.formerVisitsTitle),a(5),F(e.selectedItemsList)}}var Ve=(()=>{class n{constructor(){this.changeDetector=u(B),this.request=u(Y),this.setLanguage=u(oe),this.lang=u(Z),this.title="harmoniaUniversalis",this.subtitle="a database on animal magnetism",this.advanced_search="advanced search",this.projects="research projects",this.fields="fields of reserach",this.searchInput=new q,this.isDisplay=!1,this.data$=new M,this.searchQuery$=new L(""),this.items=[],this.baseGetURL="https://database.factgrid.de//w/api.php?action=wbgetentities&ids=",this.getUrlSuffix="&format=json&origin=*",this.formerVisitsTitle="you have visited:",this.selectedItemsList=JSON.parse(localStorage.getItem("selectedItems"))}ngOnInit(){this.subtitle=this.lang.subtitle(this.subtitle),this.advanced_search=this.lang.advanced_search(this.advanced_search),this.projects=this.lang.projects(this.projects),this.fields=this.lang.fields(this.fields),this.formerVisitsTitle=this.lang.formerVisitsTitle(this.formerVisitsTitle),this.selectedItemsList=this.selectedItemsList.filter(function(e){return e!==null}),this.pages=this.request.getStat().pipe(p(e=>Object.values(e)[1].statistics.pages)),console.log(this.selectedItemsList),this.labels=this.searchInput.valueChanges.pipe(C(400),b(e=>this.request.searchItem(e,this.lang.selectedLang)),p(e=>this.createList(e)),p(e=>e=="https://database.factgrid.de//w/api.php?action=wbgetentities&ids=&format=json&origin=*"?"https://database.factgrid.de//w/api.php?action=wbgetentities&ids=Q220375&format=json&origin=*":e),C(200),b(e=>this.request.getItem(e)),x(e=>e!==void 0),x(e=>e.entities!==void 0&&e.entities!==null),p(e=>Object.values(e.entities))).subscribe(e=>{this.items=this.setLanguage.item(e,this.lang.selectedLang),this.isDisplay=!0,this.items[0].id=="Q220375"&&(this.isDisplay=!1),this.changeDetector.detectChanges()})}createList(e){let o="",l="",d=e.search;d===void 0?d=[]:d=d;for(let A=0;A<d.length;A++)o=o+"|"+d[A].id;return o=o.slice(1),l=this.baseGetURL+o+this.getUrlSuffix,l}addParis(e){e="Paris, "+e}ngOnDestroy(){this.labels.unsubscribe()}static{this.\u0275fac=function(o){return new(o||n)}}static{this.\u0275cmp=T({type:n,selectors:[["app-search"]],standalone:!0,features:[D],decls:20,vars:7,consts:[["href",w`https://fonts.googleapis.com/icon?family=Material+Icons`,"rel","stylesheet"],[1,"cardBackground"],[1,"HUTitle"],[1,"subTitle"],["appearance","outlined",1,"mat-elevation-z12"],[1,"search-center2"],["matInput","","placeholder","Ex. Goethe","value","Goethe",3,"formControl"],["align","end"],[1,"search-center"],[1,"searchListSize"],[1,"details"],[1,"search-label"],[1,"internalLink",3,"routerLink"],["color","primary",3,"inline"],[3,"routerLink"],["href","https://database.factgrid.de/query/#%23model%0A%0ASELECT%20%3Fitem%20%3Fviewer%20%3FitemLabel%20%20WHERE%20%7B%0A%20%20SERVICE%20wikibase%3Alabel%20%7B%20bd%3AserviceParam%20wikibase%3Alanguage%20%22%5BAUTO_LANGUAGE%5D%2Cen%22.%20%7D%0A%20%20%3Fitem%20wdt%3AP2%20wd%3AQ7%3B%0A%20%20%20%20%20%20%20%20wdt%3AP247%20wd%3AQ24708.%0A%20%20BIND%28STRAFTER%28STR%28%3Fitem%29%2C%20STR%28wd%3A%29%29%20AS%20%3FitemId%29%0A%20%20BIND%28IRI%28CONCAT%28%22https%3A%2F%2Fdatabase.factgrid.de%2Fviewer%2Fitem%2F%22%2C%20%3FitemId%29%29%20AS%20%3Fviewer%29%0A%7D%0A"],[1,"search-itemSelected"],["appearance","outlined",1,"search-itemSelected-mat-card"],[1,"selectedListTitle2"],[1,"selectedItemSize"],[1,"labelTitlePadding"],[1,"selectedItemText"],[1,"whiteButton",3,"inline"]],template:function(o,l){o&1&&(t(0,"head"),m(1,"link",0),i(),t(2,"body")(3,"div",1)(4,"div",2),r(5,"FactGrid"),i(),t(6,"div",3),r(7),i()(),t(8,"mat-card",4)(9,"mat-card-content")(10,"div")(11,"div",5)(12,"mat-form-field"),m(13,"input",6),t(14,"mat-hint",7),r(15),k(16,"async"),i()()()()(),t(17,"div",8),S(18,he,4,0,"div",9)(19,ge,32,10,"div"),i()()()),o&2&&(a(7),_(l.subtitle),a(6),s("formControl",l.searchInput),a(2),v("",R(16,5,l.pages)," items"),a(3),h(l.isDisplay==!0?18:-1),a(),h(l.isDisplay==!1?19:-1))},dependencies:[P,O,$,N,z,j,U,G,V,re,ae,ie,te,ne,ee,Q,H,J,X,W,K],styles:[".search-container[_ngcontent-%COMP%]{display:flex;flex-direction:column}.HU-div[_ngcontent-%COMP%]{height:150px;display:flex;align-items:center;justify-content:center}.HUTitle-div[_ngcontent-%COMP%]{padding-left:10px;color:#ad1457;font-weight:600;font-size:60px}.search-label[_ngcontent-%COMP%]{font-weight:700}.search-itemSelected[_ngcontent-%COMP%]{margin-top:50px}.selectedItemSize[_ngcontent-%COMP%]{font-size:14px}"]})}}return n})();export{Ve as SearchComponent};
