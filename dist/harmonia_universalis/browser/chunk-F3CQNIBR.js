import{a as de}from"./chunk-DKP4YRJ3.js";import{a as ce}from"./chunk-S6LU7EFX.js";import{k as le}from"./chunk-CWWPZGSV.js";import"./chunk-2DG3KHRH.js";import{E as Y,H as Z,I as ee,L as te,M as ie,b as G,f as U,i as $,k as q,r as z,s as N,t as W,u as K}from"./chunk-7WEUQ37Z.js";import{A as x,Cb as S,Hb as O,Ib as P,J as A,La as f,Ma as _,Na as k,Oa as y,Pa as F,Qa as p,Ra as t,Sa as n,Sb as j,T as m,Ta as v,W as T,X as I,_a as L,ab as w,cb as d,dc as V,fc as B,h as E,k as D,od as X,pa as a,pd as ne,qb as o,qd as ae,r as g,rb as M,rd as re,sb as u,tc as H,td as oe,uc as Q,vc as J,wd as se,x as b,ya as R}from"./chunk-MW253N2G.js";var me=()=>[""],pe=()=>["/animal_magnetism"],he=()=>["/bibliography"],ue=(i,s)=>s.id;function ge(i,s){if(i&1&&(t(0,"span"),o(1),n()),i&2){let r=d().$implicit;a(),u(", ",r.description)}}function fe(i,s){if(i&1){let r=L();t(0,"div")(1,"span",11),o(2),n(),t(3,"mat-icon-button",12),w("click",function(){let l=T(r).$implicit,c=d(2);return I(c.goToDisplay(l.id))}),t(4,"mat-icon",13),o(5,"open_in_new"),n()(),f(6,ge,2,1,"span"),v(7,"hr"),n()}if(i&2){let r=s.$implicit;a(2),u("",r.label,"\xA0"),a(2),p("inline",!0),a(2),_(r.description?6:-1)}}function _e(i,s){if(i&1&&(t(0,"div",8)(1,"div",10),y(2,fe,8,3,"div",null,ue),n()()),i&2){let r=d();a(2),F(r.items)}}function ve(i,s){if(i&1){let r=L();t(0,"span",22),o(1),t(2,"mat-icon-button",12),w("click",function(){T(r);let l=d().$implicit,c=d(2);return I(c.goToDisplay(l.value.id))}),t(3,"mat-icon",23),o(4,"open_in_new"),n()()()}if(i&2){let r=d().$implicit;a(),u(" ",r.label,"\xA0 "),a(2),p("inline",!0)}}function Se(i,s){if(i&1&&(t(0,"div",21),f(1,ve,5,2,"span",22),v(2,"br"),n()),i&2){let r=s.$implicit;a(),_(r?1:-1)}}function Ce(i,s){if(i&1&&(t(0,"div",9)(1,"div",14)(2,"a",15),o(3,"Accueil"),n(),t(4,"span"),o(5,"\xA0|\xA0"),n(),t(6,"a",15),o(7,"Harmonia Universalis"),n(),t(8,"span"),o(9,"\xA0|\xA0"),n(),t(10,"a",15),o(11),n(),t(12,"span"),o(13,"\xA0|\xA0"),n(),t(14,"a",16),o(15," Sparql query "),n(),t(16,"span"),o(17,"\xA0\xA0|\xA0\xA0"),n()(),t(18,"div",17)(19,"mat-card",18)(20,"div",19),o(21),n(),t(22,"div",20),v(23,"hr"),t(24,"mat-card-content")(25,"div"),y(26,Se,3,1,"div",21,k),n()()()()()()),i&2){let r=d();a(2),p("routerLink",S(5,me)),a(4),p("routerLink",S(6,pe)),a(4),p("routerLink",S(7,he)),a(),M(r.bibliography),a(10),M(r.formerVisitsTitle),a(5),F(r.selectedItemsList)}}var He=(()=>{let s=class s{constructor(){this.changeDetector=m(j),this.request=m(ne),this.setLanguage=m(ce),this.lang=m(ae),this.lastSearchRoute=m(de),this.router=m(H),this.title="FactGrid",this.subTitle="a database on animal magnetism",this.advanced_search="advanced search",this.projects="research projects",this.fields="fields of reserach",this.bibliography="bibliography",this.searchInput=new $,this.isDisplay=!1,this.data$=new E,this.searchQuery$=new D(""),this.items=[],this.baseGetURL="https://database.factgrid.de//w/api.php?action=wbgetentities&ids=",this.getUrlSuffix="&format=json&origin=*",this.formerVisitsTitle="you have visited:",this.selectedItemsList=JSON.parse(localStorage.getItem("selectedItems"))}goToDisplay(e){this.lastSearchRoute.setLastSearchRoute(this.router.url),this.router.navigate(["/item",e])}ngOnInit(){this.bibliography=this.lang.getTranslation("bibliography",this.lang.selectedLang),this.subTitle=this.lang.getTranslation("FactGrid_subtitle",this.lang.selectedLang),this.advanced_search=this.lang.getTranslation("advanced_search",this.lang.selectedLang),this.projects=this.lang.getTranslation("projects",this.lang.selectedLang),this.fields=this.lang.getTranslation("fields",this.lang.selectedLang),this.formerVisitsTitle=this.lang.getTranslation("formerVisitsTitle",this.lang.selectedLang),this.selectedItemsList=this.selectedItemsList.filter(function(e){return e!==null}),this.pages=this.request.getStat().pipe(g(e=>Object.values(e)[1].statistics.pages)),console.log(this.selectedItemsList),this.labels=this.searchInput.valueChanges.pipe(x(400),A(e=>this.request.searchItem(e,this.lang.selectedLang)),g(e=>this.createList(e)),g(e=>e=="https://database.factgrid.de//w/api.php?action=wbgetentities&ids=&format=json&origin=*"?"https://database.factgrid.de//w/api.php?action=wbgetentities&ids=Q220375&format=json&origin=*":e),x(200),A(e=>this.request.getItem(e)),b(e=>e!==void 0),b(e=>e.entities!==void 0&&e.entities!==null),g(e=>Object.values(e.entities))).subscribe(e=>{this.items=this.setLanguage.item(e,this.lang.selectedLang),this.isDisplay=!0,this.items[0].id=="Q220375"&&(this.isDisplay=!1),this.changeDetector.detectChanges()})}createList(e){let l="",c="",h=e.search;h===void 0?h=[]:h=h;for(let C=0;C<h.length;C++)l=l+"|"+h[C].id;return l=l.slice(1),c=this.baseGetURL+l+this.getUrlSuffix,c}addParis(e){e="Paris, "+e}ngOnDestroy(){this.labels.unsubscribe()}};s.\u0275fac=function(l){return new(l||s)},s.\u0275cmp=R({type:s,selectors:[["app-search"]],decls:17,vars:7,consts:[[1,"prosopo-header"],[1,"prosopo-title"],[1,"prosopo-subtitle"],["appearance","outlined",1,"mat-elevation-z12"],[1,"search-center2"],["matInput","","placeholder","Ex. Goethe","value","Goethe",3,"formControl"],["align","end"],[1,"search-center"],[1,"searchListSize"],[1,"search-top-margin"],[1,"details"],[1,"search-label"],["type","button",1,"internalLink",3,"click"],["color","primary",3,"inline"],[1,"search-center","router-links"],[3,"routerLink"],["href","https://database.factgrid.de/query/#%23model%0A%0ASELECT%20%3Fitem%20%3Fviewer%20%3FitemLabel%20%20WHERE%20%7B%0A%20%20SERVICE%20wikibase%3Alabel%20%7B%20bd%3AserviceParam%20wikibase%3Alanguage%20%22%5BAUTO_LANGUAGE%5D%2Cen%22.%20%7D%0A%20%20%3Fitem%20wdt%3AP2%20wd%3AQ7%3B%0A%20%20%20%20%20%20%20%20wdt%3AP247%20wd%3AQ24708.%0A%20%20BIND%28STRAFTER%28STR%28%3Fitem%29%2C%20STR%28wd%3A%29%29%20AS%20%3FitemId%29%0A%20%20BIND%28IRI%28CONCAT%28%22https%3A%2F%2Fdatabase.factgrid.de%2Fviewer%2Fitem%2F%22%2C%20%3FitemId%29%29%20AS%20%3Fviewer%29%0A%7D%0A"],[1,"search-itemSelected"],["appearance","outlined",1,"search-itemSelected-mat-card"],[1,"selectedListTitle2"],[1,"selectedItemSize"],[1,"labelTitlePadding"],[1,"selectedItemText"],[1,"whiteButton",3,"inline"]],template:function(l,c){l&1&&(t(0,"div",0)(1,"div",1),o(2," FactGrid "),n(),t(3,"div",2),o(4),n()(),t(5,"mat-card",3)(6,"mat-card-content")(7,"div")(8,"div",4)(9,"mat-form-field"),v(10,"input",5),t(11,"mat-hint",6),o(12),O(13,"async"),n()()()()(),t(14,"div",7),f(15,_e,4,0,"div",8),f(16,Ce,28,8,"div",9),n()()),l&2&&(a(4),u(" ",c.subTitle," "),a(6),p("formControl",c.searchInput),a(2),u("",P(13,5,c.pages)," items"),a(3),_(c.isDisplay==!0?15:-1),a(),_(c.isDisplay==!1?16:-1))},dependencies:[B,J,Q,N,G,U,q,z,ie,te,Z,Y,ee,le,K,W,X,se,re,oe,V],styles:[".search-container[_ngcontent-%COMP%]{display:flex;flex-direction:column}.HU-div[_ngcontent-%COMP%]{height:150px;display:flex;align-items:center;justify-content:center}.HUTitle-div[_ngcontent-%COMP%]{padding-left:10px;color:#ad1457;font-weight:600;font-size:60px}.search-label[_ngcontent-%COMP%]{font-weight:700}.search-itemSelected[_ngcontent-%COMP%]{margin-top:50px}.selectedItemSize[_ngcontent-%COMP%]{font-size:14px}.search-top-margin[_ngcontent-%COMP%]{margin-top:20px}"]});let i=s;return i})();export{He as SearchComponent};
